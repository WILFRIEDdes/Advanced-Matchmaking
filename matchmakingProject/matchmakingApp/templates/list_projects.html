{% extends 'base.html' %}

{% block title %}Liste des Projets{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-6">Liste des projets</h1>

<div class="space-y-6">
    {% for projet in projets %}
        <div class="bg-white shadow-md rounded-xl p-6">
            <h2 class="text-xl font-semibold text-blue-700">{{ projet.nom }}</h2>
            <p class="text-gray-700 mt-2">{{ projet.description }}</p>
            <p class="mt-2 text-sm text-gray-600">
                üìÖ Du {{ projet.date_debut|date:"d/m/Y" }} au {{ projet.date_fin|date:"d/m/Y" }}
            </p>

            {% if projet.equipe %}
                <div class="mt-4">
                    <p class="font-medium text-green-600">‚úÖ √âquipe assign√©e</p>
                    <ul class="list-disc list-inside text-gray-700 mt-2">
                        {% for membre in projet.equipe.equipemembre_set.all %}
                            <li>{{ membre.utilisateur.prenom }} {{ membre.utilisateur.nom }} ({{ membre.utilisateur.role }})</li>
                        {% empty %}
                            <li>Aucun membre assign√©</li>
                        {% endfor %}
                    </ul>
                </div>
            {% else %}
                <p class="mt-4 text-red-500 font-medium">‚ùå Aucune √©quipe assign√©e</p>
            {% endif %}
        </div>
    {% empty %}
        <p>Aucun projet trouv√©.</p>
    {% endfor %}
</div>
{% endblock %}
